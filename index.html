<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard Electoral - Impacto de Reformas</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans:wght@400;500;600;700&family=Roboto:wght@400;500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
    <script src="script.js"></script>
</head>
<body>
    <div class="root">
        <!-- Header -->
        <div class="header-section">
            <div class="header-content">
                <div class="header-title">Reforma Electoral</div>
            </div>
            <div class="header-date">Fecha de corte: 18-08-2025</div>
        </div>

        <!-- Main Content -->
        <div class="main-container">
            <div class="dashboard-title">
                <div class="title-content">
                    <div class="title-header">
                        <div class="spacer"></div>
                        <div class="main-title">Herramienta de Simulación Electoral</div>
                    </div>
                    <div class="chamber-tabs" role="tablist" aria-label="Selección de cámara">
                        <div class="tab-button" data-state="Active" role="tab" aria-selected="false" tabindex="0">
                            <div>Cámara de diputados</div>
                        </div>
                        <div class="tab-button active" data-state="Default" role="tab" aria-selected="true" tabindex="0">
                            <div>Cámara de senadores</div>
                        </div>
                    </div>
                    <div class="controls-row">
                        <div class="control-group">
                            <div class="control-label">Año</div>
                            <div class="control-pills" role="radiogroup" aria-label="Selección de año">
                                <div class="pill-button active" role="radio" aria-checked="true" tabindex="0">2018</div>
                                <div class="pill-button" role="radio" aria-checked="false" tabindex="0">2021</div>
                                <div class="pill-button" role="radio" aria-checked="false" tabindex="0">2024</div>
                            </div>
                        </div>
                        <div class="control-group right-align">
                            <div class="control-label">Modelo</div>
                            <div class="control-pills" role="radiogroup" aria-label="Selección de modelo">
                                <div class="pill-button" role="radio" aria-checked="false" tabindex="0">Vigente</div>
                                <div class="pill-button" role="radio" aria-checked="false" tabindex="0">Plan A</div>
                                <div class="pill-button" role="radio" aria-checked="false" tabindex="0">Plan C</div>
                                <div class="pill-button active" role="radio" aria-checked="true" tabindex="0">Personalizado</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

        <!-- Parameters Section (Collapsible) -->
        <div class="parameters-section" id="parameters-section">
            <div class="parameters-title">Parámetros</div>
    
        <!-- Step 1: Shocks de Votación -->
        <div class="parameters-grid">
            <div class="parameter-card shocks">
                <div class="parameter-title-section">
                    <div class="parameter-title">Shocks por partido (Δ porcentaje)</div>
                </div>
                <div class="party-shock-inputs">
                    <div class="shock-input-group">
                        <div class="shock-value-box" id="shock-value-morena">+0.0%</div>
                        <label class="shock-label" for="shock-morena">MORENA</label>
                        <input type="range" class="shock-slider" id="shock-morena" min="-20" max="20" step="0.1" value="0">
                    </div>
                    <div class="shock-input-group">
                        <div class="shock-value-box" id="shock-value-pan">+0.0%</div>
                        <label class="shock-label" for="shock-pan">PAN</label>
                        <input type="range" class="shock-slider" id="shock-pan" min="-20" max="20" step="0.1" value="0">
                    </div>
                    <div class="shock-input-group">
                        <div class="shock-value-box" id="shock-value-pri">+0.0%</div>
                        <label class="shock-label" for="shock-pri">PRI</label>
                        <input type="range" class="shock-slider" id="shock-pri" min="-20" max="20" step="0.1" value="0">
                    </div>
                    <div class="shock-input-group">
                        <div class="shock-value-box" id="shock-value-pt">+0.0%</div>
                        <label class="shock-label" for="shock-pt">PT</label>
                        <input type="range" class="shock-slider" id="shock-pt" min="-20" max="20" step="0.1" value="0">
                    </div>
                    <div class="shock-input-group">
                        <div class="shock-value-box" id="shock-value-pvem">+0.0%</div>
                        <label class="shock-label" for="shock-pvem">PVEM</label>
                        <input type="range" class="shock-slider" id="shock-pvem" min="-20" max="20" step="0.1" value="0">
                    </div>
                    <div class="shock-input-group">
                        <div class="shock-value-box" id="shock-value-mc">+0.0%</div>
                        <label class="shock-label" for="shock-mc">MC</label>
                        <input type="range" class="shock-slider" id="shock-mc" min="-20" max="20" step="0.1" value="0">
                    </div>
                </div>
            </div>
        </div>

        <!-- Step 2: Magnitud -->
        <div class="parameters-grid">
            <div class="parameter-card magnitude">
                <div class="parameter-title-section">
                    <div class="parameter-title">Total de Cámara</div>
                </div>
                <div class="form-group">
                    <label class="parameter-label" for="input-magnitud">Total de escaños: <span id="input-magnitud-value">128</span></label>
                    <input type="range" class="form-input" id="input-magnitud" min="1" max="700" step="1" value="128">
                </div>
                <div class="validation-note">
                </div>
            </div>
        </div>

        <!-- Step 3: Umbral -->
        <div class="parameters-grid">
            <div class="parameter-card threshold">
                <div class="parameter-title-section">
                    <div class="parameter-title">Configuración del Umbral</div>
                </div>
                <div class="parameter-content">
                    <div class="form-group">
                        <label class="parameter-label" for="threshold-switch">¿Activar umbral?</label>
                        <div class="control-switch" id="threshold-switch" data-switch="On" role="switch" aria-checked="true" aria-label="Activar umbral" tabindex="0">
                            <div class="switch-slider"></div>
                        </div>
                    </div>
                    <div class="radio-option" data-state="On">
                        <div class="radio-button">
                            <div class="radio-dot"></div>
                        </div>
                        <div class="radio-text">
                            <div class="radio-label">Nacional (%)</div>
                        </div>
                    </div>
                    <div class="radio-option" data-state="Off">
                        <div class="radio-button"></div>
                        <div class="radio-text">
                            <div class="radio-label">Estatal (%)</div>
                        </div>
                    </div>
                    <div class="threshold-controls">
                        <div class="threshold-value-box" id="threshold-value-box">3.0%</div>
                        <label class="parameter-label" for="threshold-slider">Porcentaje mínimo:</label>
                        <input type="range" class="form-input threshold-slider" id="threshold-slider" min="0" max="20" step="0.1" value="3">
                    </div>
                </div>
            </div>
        </div>

        <!-- Step 4: Cláusula de Sobrerrepresentación -->
        <div class="parameters-grid">
            <div class="parameter-card overrepresentation" id="overrepresentation-card" style="display:none;">
                <div class="parameter-title-section">
                    <div class="parameter-title">Límite de Sobrerrepresentación</div>
                </div>
                <div class="parameter-content">
                    <div class="form-group">
                        <div class="overrep-value-box" id="overrep-value-box">8.0%</div>
                        <label class="parameter-label" for="overrep-slider">Límite sobre % voto nacional:</label>
                        <input type="range" class="form-input overrep-slider" id="overrep-slider" min="0" max="20" step="0.1" value="8">
                    </div>
                    <div class="parameter-note">
                    </div>
                </div>
            </div>
        </div>

        <!-- Step 4.1: Tope de Escaños por Partido (Solo Diputados) -->
        <div class="parameters-grid">
            <div class="parameter-card seat-cap" id="seat-cap-card" style="display:none;">
                <div class="parameter-title-section">
                    <div class="parameter-title">Tope de escaños por partido</div>
                </div>
                <div class="parameter-content">
                    <div class="form-group">
                        <label class="parameter-label" for="seat-cap-switch">¿Limitar máximo de escaños por partido?</label>
                        <div class="control-switch" id="seat-cap-switch" data-switch="Off" role="switch" aria-checked="false" aria-label="Activar tope de escaños" tabindex="0">
                            <div class="switch-slider"></div>
                        </div>
                    </div>
                    <div class="form-group" id="seat-cap-input-group" style="display:none; margin-top:8px;">
                        <label class="parameter-label" for="seat-cap-input">Máximo de escaños por partido: <span id="seat-cap-input-value">300</span></label>
                        <input type="range" class="form-input" id="seat-cap-input" min="1" max="500" step="1" value="300">
                    </div>
                    <div class="parameter-note">Si un partido supera el tope, los escaños excedentes se redistribuyen por RP.</div>
                </div>
            </div>
        </div>

        <!-- Step 5: Coaliciones -->
        <div class="parameters-grid">
            <div class="parameter-card coalition">
                <div class="parameter-title-section">
                    <div class="parameter-title">¿Utilizar coaliciones para repartir escaños?</div>
                </div>
                <div class="parameter-content">
                    <div class="control-switch" data-switch="On" role="switch" aria-checked="true" aria-label="Activar coaliciones" tabindex="0">
                        <div class="switch-slider"></div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Step 6: Regla Electoral -->
        <div class="parameters-grid">
            <div class="parameter-card rules">
                <div class="parameter-title-section">
                    <div class="parameter-title">Tipo de Regla</div>
                </div>
                <div class="parameter-content">
                    <div class="radio-option" data-state="Off" id="radio-mr">
                        <div class="radio-button"></div>
                        <div class="radio-text">
                            <div class="radio-label">Mayoría Relativa</div>
                        </div>
                    </div>
                    <div class="radio-option" data-state="Off" id="radio-rp">
                        <div class="radio-button"></div>
                        <div class="radio-text">
                            <div class="radio-label">Representación Proporcional</div>
                        </div>
                    </div>
                    <div class="radio-option" data-state="On" id="radio-mixto">
                        <div class="radio-button">
                            <div class="radio-dot"></div>
                        </div>
                        <div class="radio-text">
                            <div class="radio-label">Mixto</div>
                            <div class="radio-sublabel">Mayoría Relativa + Representación Proporcional</div>
                        </div>
                    </div>
                    <div class="parameter-note">
                    </div>
                    <div class="mixto-inputs" id="mixto-inputs" style="margin-top:12px;">
                        <div class="form-group">
                            <label class="parameter-label" for="input-mr">Escaños por Mayoría Relativa: <span id="input-mr-value">0</span></label>
                            <input type="range" class="form-input" id="input-mr" min="0" max="700" step="1" value="0">
                        </div>
                        <div class="form-group">
                            <label class="parameter-label" for="input-rp">Escaños por Representación Proporcional: <span id="input-rp-value">0</span></label>
                            <input type="range" class="form-input" id="input-rp" min="0" max="700" step="1" value="0">
                        </div>
                        <div class="validation-message" id="mixto-validation" style="display:none; margin-top:8px; padding:8px; background:#fee; border:1px solid #fcc; border-radius:4px; color:#c33; font-size:13px;">
                             La suma de escaños debe ser igual al total de la cámara
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Step 6.1: Primera Minoría -->
        <div class="parameters-grid">
            <div class="parameter-card first-minority" id="first-minority-card" style="display:none;">
                <div class="parameter-title-section">
                    <div class="parameter-title">Primera Minoría</div>
                </div>
                <div class="parameter-content">
                    <div class="form-group">
                        <label class="parameter-label" for="first-minority-switch">¿Activar primera minoría?</label>
                        <div class="control-switch" id="first-minority-switch" data-switch="On" role="switch" aria-checked="true" aria-label="Activar primera minoría" tabindex="0">
                            <div class="switch-slider"></div>
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="parameter-label" for="input-first-minority">Escaños por Primera Minoría: <span id="input-first-minority-value">0</span></label>
                        <input type="range" class="form-input" id="input-first-minority" min="0" max="700" step="1" value="0">
                    </div>
                </div>
            </div>
        </div>


        <!-- Step 7: Método de Reparto -->
        <div class="parameters-grid">
            <div class="parameter-card method">
                <div class="parameter-title-section">
                    <div class="parameter-title">Método de Asignación</div>
                </div>
                <div class="parameter-content">
                    <div class="form-group">
                        <label class="parameter-label" for="quota-method">Cociente + restos:</label>
                        <select class="form-select" id="quota-method">
                            <option value="hare" selected>Hare</option>
                            <option value="droop">Droop</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label class="parameter-label" for="divisor-method">Divisores:</label>
                        <select class="form-select" id="divisor-method">
                            <option value="dhondt" selected>D'Hondt</option>
                            <option value="sainte-lague">Sainte-Laguë</option>
                        </select>
                    </div>
            
        </div>
        </div> <!-- End Parameters Section -->

        <!-- Chamber Composition -->
        <div class="chamber-composition">
            <div class="composition-title">Composición de la Cámara de Senadores</div>
            <div class="composition-container">
                <div class="composition-content">
                    <div class="seat-map" role="img" aria-label="Distribución de escaños en la Cámara de Senadores">
                        <div class="seat-grid">
                            <!-- Las filas se generarán dinámicamente con JavaScript -->
                        </div>
                    </div>
                    
                    <div class="results-panel">
                        <div class="results-title">Resultados por partido</div>
                        <div class="party-results">
                            <div class="party-result">
                                <div class="party-color" style="background: #8B2231;"></div>
                                <div class="party-name">MORENA</div>
                                <div class="party-stats">
                                    <div class="party-seats">69 escaños</div>
                                    <div class="party-percentage">53.9%</div>
                                </div>
                            </div>
                            <div class="party-result">
                                <div class="party-color" style="background: #0055A5;"></div>
                                <div class="party-name">PAN</div>
                                <div class="party-stats">
                                    <div class="party-seats">22 escaños</div>
                                    <div class="party-percentage">17.2%</div>
                                </div>
                            </div>
                            <div class="party-result">
                                <div class="party-color" style="background: #0D7137;"></div>
                                <div class="party-name">PRI</div>
                                <div class="party-stats">
                                    <div class="party-seats">16 escaños</div>
                                    <div class="party-percentage">12.5%</div>
                                </div>
                            </div>
                            <div class="party-result">
                                <div class="party-color" style="background: #D52B1E;"></div>
                                <div class="party-name">PT</div>
                                <div class="party-stats">
                                    <div class="party-seats">8 escaños</div>
                                    <div class="party-percentage">6.3%</div>
                                </div>
                            </div>
                            <div class="party-result">
                                <div class="party-color" style="background: #5CE23D;"></div>
                                <div class="party-name">PVEM</div>
                                <div class="party-stats">
                                    <div class="party-seats">6 escaños</div>
                                    <div class="party-percentage">4.7%</div>
                                </div>
                            </div>
                            <div class="party-result">
                                <div class="party-color" style="background: #F58025;"></div>
                                <div class="party-name">MC</div>
                                <div class="party-stats">
                                    <div class="party-seats">4 escaños</div>
                                    <div class="party-percentage">3.1%</div>
                                </div>
                            </div>
                            <div class="party-result">
                                <div class="party-color" style="background: #FFCC00;"></div>
                                <div class="party-name">PRD</div>
                                <div class="party-stats">
                                    <div class="party-seats">3 escaños</div>
                                    <div class="party-percentage">2.3%</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Key Indicators -->
        <div class="key-indicators">
            <div class="indicators-header">
                <div class="indicators-title">Indicadores</div>
                <div class="indicators-grid">
                    <div class="indicator-card total-seats">
                        <div class="indicator-header single">
                            <div class="indicator-title">Total de escaños por partido</div>
                        </div>
                        <div class="indicator-value-section">
                            <div class="indicator-value">128</div>
                        </div>
                        <div class="indicator-change">Senadores</div>
                    </div>
                    
                    <div class="indicator-card votes-vs-seats">
                        <div class="indicator-header">
                            <div class="indicator-title">% votos vs % escaños</div>
                            <div class="info-icon">
                                <div class="info-dot"></div>
                                <div class="info-dot"></div>
                                <div class="info-dot"></div>
                            </div>
                        </div>
                        <div class="indicator-value-section">
                            <div class="indicator-value">±2.1%</div>
                        </div>
                        <div class="indicator-change">Diferencia promedio</div>
                    </div>

                    <div class="indicator-card gallagher-index">
                        <div class="indicator-header">
                            <div class="indicator-title">Índice de Gallagher</div>
                            <div class="info-icon">
                                <div class="info-dot"></div>
                                <div class="info-dot"></div>
                                <div class="info-dot"></div>
                            </div>
                        </div>
                        <div class="indicator-value-section">
                            <div class="indicator-value large">5.2</div>
                        </div>
                        <div class="indicator-change small">Global y por cámara</div>
                    </div>

                    <div class="indicator-card total-votes">
                        <div class="indicator-header single">
                            <div class="indicator-title">Totales del Sistema</div>
                        </div>
                        <div class="indicator-value-section">
                            <div class="indicator-value">60.1M</div>
                        </div>
                        <div class="indicator-change">Votos totales</div>
                    </div>

                    <div class="indicator-card thresholds">
                        <div class="indicator-header single">
                            <div class="indicator-title">Umbral de inclusión</div>
                        </div>
                        <div class="indicator-value-section">
                            <div class="indicator-value">3%</div>
                        </div>
                        <div class="indicator-change">Nacional aplicado</div>
                    </div>

                    <div class="indicator-card representation-threshold">
                        <div class="indicator-header single">
                            <div class="indicator-title">Umbral de representación</div>
                        </div>
                        <div class="indicator-value-section">
                            <div class="indicator-value">8pp</div>
                        </div>
                        <div class="indicator-change">Cláusula aplicada</div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</body>
</html>
